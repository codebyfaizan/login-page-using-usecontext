(this["webpackJsonplogin-page-using-usecontext"]=this["webpackJsonplogin-page-using-usecontext"]||[]).push([[0],[,,,function(e,n,t){e.exports={login:"Login_login__1yDN3",actions:"Login_actions__3hVJR"}},,function(e,n,t){e.exports={control:"Input_control__1kysx",invalid:"Input_invalid__1PzG7"}},,function(e,n,t){e.exports={card:"Card_card__RMHDM"}},function(e,n,t){e.exports={button:"Button_button__2bgCd"}},function(e,n,t){e.exports={home:"Home_home__1i8qG"}},function(e,n,t){e.exports={nav:"Navigation_nav__2eNJl"}},function(e,n,t){e.exports={"main-header":"MainHeader_main-header___p8bP"}},,,,,,function(e,n,t){},function(e,n,t){"use strict";t.r(n);var a=t(1),i=t.n(a),c=t(6),o=t.n(c),l=t(2),s=t(0),u=i.a.createContext({isLoggedIn:!1,onLogout:function(){},onLogin:function(e,n){}}),r=function(e){var n=i.a.useState(!1),t=Object(l.a)(n,2),a=t[0],c=t[1];return i.a.useEffect((function(){"1"===localStorage.getItem("isLoggedIn")&&c(!0)}),[]),Object(s.jsx)(u.Provider,{value:{isLoggedIn:a,onLogout:function(){localStorage.removeItem("isLoggedIn"),c(!1)},onLogin:function(){localStorage.setItem("isLoggedIn","1"),c(!0)}},children:e.children})},d=u,j=(t(17),t(7)),g=t.n(j),f=function(e){return Object(s.jsx)("div",{className:"".concat(g.a.card," ").concat(e.className),children:e.children})},b=t(3),v=t.n(b),h=t(8),x=t.n(h),m=function(e){return Object(s.jsx)("button",{type:e.type||"button",className:"".concat(x.a.button," ").concat(e.className),onClick:e.onClick,disabled:e.disabled,children:e.children})},p=t(5),O=t.n(p),_=i.a.forwardRef((function(e,n){var t=i.a.useRef();function a(){t.current.focus()}return i.a.useImperativeHandle(n,(function(){return{focus:a}})),Object(s.jsxs)("div",{className:"".concat(O.a.control," ").concat(!1===e.isValid?O.a.invalid:""),children:[Object(s.jsx)("label",{htmlFor:e.id,children:e.label}),Object(s.jsx)("input",{ref:t,type:e.type,id:e.id,value:e.value,onChange:e.onChange,onBlur:e.onBlur})]})})),N=function(e,n){return"USER_INPUT"===n.type?{value:n.val,isValid:n.val.includes("@")}:"INPUT_BLUR"===n.type?{value:e.value,isValid:e.value.includes("@")}:{value:"",isValid:!1}},I=function(e,n){return"USER_INPUT"===n.type?{value:n.val,isValid:n.val.trim().length>6}:"INPUT_BLUR"===n.type?{value:e.value,isValid:e.value.trim().length>6}:{value:"",isValid:!1}},L=function(e){var n=i.a.useState(!1),t=Object(l.a)(n,2),a=t[0],c=t[1],o=i.a.useReducer(N,{value:"",isValid:null}),u=Object(l.a)(o,2),r=u[0],j=u[1],g=i.a.useReducer(I,{value:"",isValid:null}),b=Object(l.a)(g,2),h=b[0],x=b[1],p=i.a.useContext(d),O=i.a.useRef(),L=i.a.useRef();i.a.useEffect((function(){return console.log("EFFECT RUNNING"),function(){console.log("EFFECT CLEANUP")}}),[]);var y=r.isValid,U=h.isValid;i.a.useEffect((function(){var e=setTimeout((function(){console.log("Checking form validity!"),c(y&&U)}),500);return function(){console.log("CLEANUP"),clearTimeout(e)}}),[y,U]);return Object(s.jsx)(f,{className:v.a.login,children:Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a?p.onLogin(r.value,h.value):y?L.current.focus():O.current.focus()},children:[Object(s.jsx)(_,{ref:O,id:"email",label:"E-mail",type:"email",isValid:y,value:r.value,onChange:function(e){j({type:"USER_INPUT",val:e.target.value}),c(e.target.value.includes("@")&&h.isValid)},onBlur:function(){j({type:"INPUT_BLUR"})}}),Object(s.jsx)(_,{ref:L,id:"password",label:"Password",type:"password",isValid:U,value:h.value,onChange:function(e){x({type:"USER_INPUT",val:e.target.value}),c(r.isValid&&e.target.value.trim().length>6)},onBlur:function(){x({type:"INPUT_BLUR"})}}),Object(s.jsx)("div",{className:v.a.actions,children:Object(s.jsx)(m,{type:"submit",className:v.a.btn,children:"Login"})})]})})},y=t(9),U=t.n(y),C=function(e){return Object(s.jsx)(f,{className:U.a.home,children:Object(s.jsx)("h1",{children:"Welcome back!"})})},R=t(10),V=t.n(R),E=function(){var e=i.a.useContext(d);return Object(s.jsx)("nav",{className:V.a.nav,children:Object(s.jsxs)("ul",{children:[e.isLoggedIn&&Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:"/",children:"Users"})}),e.isLoggedIn&&Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:"/",children:"Admin"})}),e.isLoggedIn&&Object(s.jsx)("li",{children:Object(s.jsx)("button",{onClick:e.onLogout,children:"Logout"})})]})})},P=t(11),T=t.n(P),B=function(e){return Object(s.jsxs)("header",{className:T.a["main-header"],children:[Object(s.jsx)("h1",{children:"A Typical Page"}),Object(s.jsx)(E,{})]})};var S=function(){var e=i.a.useContext(d);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(B,{}),Object(s.jsxs)("main",{children:[!e.isLoggedIn&&Object(s.jsx)(L,{}),e.isLoggedIn&&Object(s.jsx)(C,{})]})]})};o.a.render(Object(s.jsx)(r,{children:Object(s.jsx)(S,{})}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.85945917.chunk.js.map